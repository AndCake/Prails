<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>{#advanced_dlg.code_title}</title>
	<script type="text/javascript" src="../../tiny_mce_popup.js"></script>
	<script type="text/javascript" src="js/source_editor.js"></script>

	<link rel="stylesheet" type="text/css" href="../../../../../builder/js/codeeditor/lib/codemirror.css"/> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/lib/codemirror.js"></script> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/lib/util/foldcode.js"></script> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/mode/xml/xml.js"></script> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/mode/css/css.js"></script> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/mode/clike/clike.js"></script> 
	<script type="text/javascript" src="../../../../../builder/js/codeeditor/mode/javascript/javascript.js"></script> 
	<style type="text/css">
		@font-face {
		    font-family: 'MesloLGMDZRegular';
		    src: url('../../../../../builder/css/meslolgm-dz-regular-webfont.eot');
		    src: url('../../../../../builder/css/meslolgm-dz-regular-webfont.eot?#iefix') format('embedded-opentype'),
		         url('../../../../../builder/css/meslolgm-dz-regular-webfont.woff') format('woff'),
		         url('../../../../../builder/css/meslolgm-dz-regular-webfont.ttf') format('truetype'),
		         url('../../../../../builder/css/meslolgm-dz-regular-webfont.svg#MesloLGMDZRegular') format('svg');
		    font-weight: normal;
		    font-style: normal;
		
		}

		html, body { margin: 0px; padding: 0px; font-size: 11px; }
		html, body, .CodeMirror-scroll {
			height: 100%;
		}
		.CodeMirror {
			height: 90%;
		}
		.CodeMirror-scrollbar {
			position: absolute;
			right: 0px;
			z-index: 1;
		}
		.CodeMirror pre.activeline {
			background-color: #ffffef;
		}
		.CodeMirror-completions { position: absolute; margin-top: -1em; }
		.CodeMirror-completions select { outline: none; }
		.CodeMirror, .CodeMirror-scroll {
			display: block;
			width: 99% !important;
		}
		.CodeMirror {
			font-family: MesloLGMDZRegular, monospace;
			line-height: 1.5em; 
			background: white;
		}
	</style>
</head>
<body onresize="resizeInputs();" style="display:none; overflow:hidden;">
	<form name="source" onsubmit="saveContent();return false;" action="#">
		<div style="float: left" class="title"><label for="htmlSource">{#advanced_dlg.code_title}</label></div>

		<div id="wrapline" style="float: right">
			<input type="checkbox" name="wraped" id="wraped" onclick="toggleWordWrap(this);" class="wordWrapCode" /><label for="wraped">{#advanced_dlg.code_wordwrap}</label>
		</div>

		<br style="clear: both" />

		<textarea name="htmlSource" id="htmlSource" rows="15" cols="100" style="width: 100%; height: 100%; font-family: 'Courier New',Courier,monospace; font-size: 12px;" dir="ltr" wrap="off" class="mceFocus"></textarea>

		<div class="mceActionPanel">
			<input type="submit" role="button" name="insert" value="{#update}" id="insert" />
			<input type="button" role="button" name="cancel" value="{#cancel}" onclick="tinyMCEPopup.close();" id="cancel" />
		</div>
	</form>
	<script type="text/javascript">
		window.onload = function() {
		if (parent.Builder) {
			document.getElementById("htmlSource").editor = CodeMirror.fromTextArea(document.getElementById("htmlSource"), {
					lineNumbers: true,
					matchBrackets: true,
					mode: "text/html",
					indentUnit: 4,
					tabSize: 4,
					onGutterClick: CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder),
					onChange: function() {
						document.getElementById("htmlSource").value = document.getElementById("htmlSource").editor.getValue();
					},
					onCursorActivity: function() {
						if (window.hlLine) {
							document.getElementById("htmlSource").editor.setLineClass(window.hlLine, null);
						}
						window.hlLine = document.getElementById("htmlSource").editor.setLineClass(document.getElementById("htmlSource").editor.getCursor().line, "activeline");
					}
			});
			window.hlLine = document.getElementById("htmlSource").editor.setLineClass(0, "activeline");
		}};
	</script>
</body>
</html>